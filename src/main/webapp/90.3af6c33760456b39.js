"use strict";(self.webpackChunknew=self.webpackChunknew||[]).push([[90],{5090:(ee,f,u)=>{u.r(f),u.d(f,{Gestao_manutencoesModule:()=>W});var m=u(6895),r=u(2699),e=u(1571),O=u(9795),D=u(4389),E=u(313),y=u(5175),M=u(805),g=u(4006),v=u(2210),C=u(1989),b=u(1493),Z=u(1511),N=u(3958);const U=["popup"],I=["popup2"],S=["tooltip"],T=function(s,l,t){return{background:s,"border-color":l,"border-style":t}};function P(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",61)(1,"div",62),e.NdJ("click",function(){const i=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openModal(i))})("mouseenter",function(o){const c=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openTooltip(o,c))})("mouseleave",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closeTooltip())}),e.TgZ(2,"div",63),e._uU(3),e.qZA(),e.TgZ(4,"div",64),e._uU(5),e.qZA(),e.TgZ(6,"div",64),e._uU(7),e.ALo(8,"date"),e.TgZ(9,"b"),e._uU(10),e.qZA()()()()}if(2&s){const t=l.$implicit;e.Q6J("dragData",t)("ngStyle",e.kEZ(9,T,t.color,t.border,"A"==t.estado?"dashed":"solid")),e.xp6(3),e.Oqu(t.title),e.xp6(2),e.Oqu(t.local),e.xp6(2),e.hij("",e.xi3(8,6,t.start,"yyyy-MM-dd")," "),e.xp6(3),e.hij("(",t.estado_text,")")}}function w(s,l){if(1&s){const t=e.EpF();e._UZ(0,"mbsc-calendar-nav",65),e.TgZ(1,"mbsc-button",66),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addUtilizador())}),e._uU(2,"Adicionar Utilizador"),e.qZA(),e.TgZ(3,"div",67)(4,"div",68),e._uU(5,"Corretiva"),e.qZA(),e.TgZ(6,"div",69),e._uU(7,"Melhoria"),e.qZA(),e.TgZ(8,"div",70),e._uU(9,"Externa"),e.qZA(),e.TgZ(10,"div",71),e._uU(11,"Preventiva"),e.qZA(),e._UZ(12,"mbsc-calendar-prev",72)(13,"mbsc-calendar-today",73)(14,"mbsc-calendar-next",74),e.qZA()}2&s&&(e.xp6(1),e.Q6J("themeVariant","light"))}function z(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",76)(1,"div",62),e.NdJ("click",function(){const i=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.openModal(i))})("mouseenter",function(o){const c=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.openTooltip(o,c))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.closeTooltip())}),e.TgZ(2,"div",63),e._uU(3),e.qZA(),e.TgZ(4,"div",64),e._uU(5),e.qZA(),e.TgZ(6,"div",64),e._uU(7),e.ALo(8,"date"),e.TgZ(9,"b"),e._uU(10),e.qZA()()()()}if(2&s){const t=l.$implicit;e.Q6J("dragData",t)("ngStyle",e.kEZ(9,T,t.color,t.border,"A"==t.estado?"dashed":"solid")),e.xp6(3),e.Oqu(t.title),e.xp6(2),e.Oqu(t.local),e.xp6(2),e.hij("",e.xi3(8,6,t.start,"yyyy-MM-dd")," "),e.xp6(3),e.hij("(",t.estado_text,")")}}function k(s,l){if(1&s&&e.YNc(0,z,11,13,"div",75),2&s){const t=l.$implicit,n=e.oxw();e.Q6J("ngForOf",n.getEmAtraso(t))}}function x(s,l){1&s&&(e.TgZ(0,"div",77),e._uU(1,"Em Atraso"),e.qZA())}function G(s,l){if(1&s&&(e.TgZ(0,"div",78)(1,"div",79),e._uU(2),e.qZA(),e.TgZ(3,"div",80),e._uU(4),e.qZA(),e.TgZ(5,"div",81),e._UZ(6,"span",82),e.qZA()()),2&s){const t=l.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.title)}}const q=function(s,l){return{borderColor:s,"border-style":l}};function J(s,l){if(1&s&&(e.TgZ(0,"div",83)(1,"div",63),e._uU(2),e.qZA(),e.TgZ(3,"div",64),e._uU(4),e.qZA(),e.TgZ(5,"div",64),e._uU(6),e.ALo(7,"date"),e.TgZ(8,"b"),e._uU(9),e.qZA()()()),2&s){const t=l.$implicit;e.Q6J("ngStyle",e.WLB(8,q,t.original.border,"A"==t.original.estado?"dashed":"solid")),e.xp6(2),e.Oqu(t.original.title),e.xp6(2),e.Oqu(t.original.local),e.xp6(2),e.hij("",e.xi3(7,5,t.original.start,"yyyy-MM-dd")," "),e.xp6(3),e.hij("(",t.original.estado_text,")")}}function Y(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",84)(1,"mbsc-input",85),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearch(o))})("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.searchValue=o)}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.searchValue)}}function Q(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",86)(1,"mbsc-button",87),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDeleteClick())}),e._uU(2,"Remover do Calend\xe1rio"),e.qZA()()}2&s&&(e.xp6(1),e.Q6J("themeVariant","light"))}function B(s,l){if(1&s&&e._UZ(0,"app-ficha-manutencao",88),2&s){const t=e.oxw();e.Q6J("ID_PEDIDO_INPUT",t.ID_PEDIDO_INPUT)}}function F(s,l){if(1&s&&e._UZ(0,"app-manutencoes-preventivas",88),2&s){const t=e.oxw();e.Q6J("ID_PEDIDO_INPUT",t.ID_PEDIDO_INPUT)}}const h=function(){return{width:"100%",height:"25px",background:"white"}},_=function(){return{standalone:!0}},L=function(s){return{background:s}},R=function(){return{height:"99vh",width:"100vw"}};(0,r.Ov)({locale:r.Mk,theme:"windows",themeVariant:"light"});let V=(()=>{class s{constructor(t,n,o,i,c,a){this.notify=t,this.MANMOVMANUTENCAOCABService=n,this.GERUTILIZADORESService=o,this.MANDICAMBITOSService=i,this.MANDICEQUIPASService=c,this.messageService=a,this.formatdate={monthNames:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"],dayNamesMin:["D","M","T","Q","Q","S","S"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sext","S\xe1b"]},this.minTime="",this.maxTime="",this.utilizadores=[],this.temp_utilizadores=[],this.drop_utilizadores=[],this.drop_ambitos_manutencao=[],this.drop_equipas=[],this.manutencoes=[],this.manutencoes_old=[],this.manutencoesDisponiveis=[],this.myResources=[],this.invalid=[],this.AMBITO_MANUTENCAO=null,this.calView={timeline:{type:"week",eventList:!0,weekNumbers:!0,startDay:1,endDay:5}},this.currentEvent={},this.calendarOptions={dragToMove:!0,dragToCreate:!1,externalDrop:!0,externalDrag:!0,dragToResize:!1,clickToCreate:!1,resources:this.utilizadores,showEventTooltip:!1,onEventHoverIn:d=>{this.openTooltip(d,null)},onEventHoverOut:()=>{this.closeTooltip()},onEventClick:d=>{this.timer=setTimeout(()=>{this.tooltip.close()},200),this.openModal(d.event)},onEventCreate:d=>{"pendentes"==d.event.type?(this.manutencoesDisponiveis=this.manutencoesDisponiveis.filter(p=>p.id!==d.event.id),this.manutencoes.push(d.event)):(this.manutencoes_old=this.manutencoes_old.filter(p=>p.id!==d.event.id),this.manutencoes.push(d.event)),this.atualizarManutencao(d.event)},onEventUpdate:d=>{this.atualizarManutencao(d.event)},onEventDelete:d=>{},onPageLoading:d=>{this.carregaManutencoes(d)}},this.rangeOptions={controls:["calendar","time"],select:"range",display:"anchored",showRangeLabels:!1,touchUi:!0,dateFormat:"YYYY-MM-DD",onChange:d=>{}},this.popupAddButtons=["cancel",{handler:()=>{this.saveShift()},keyCode:"enter",text:"Add",cssClass:"mbsc-popup-button-primary"}],this.popupEditButtons_edit=["cancel",{handler:()=>{this.saveShift()},keyCode:"enter",text:"Gravar",cssClass:"mbsc-popup-button-primary"}],this.popupEditButtons=["cancel"],this.popupEditButtons2=["cancel",{handler:()=>{if(null!=this.utilizador){let d=this.drop_utilizadores.find(p=>p.value==this.utilizador);d&&0==this.utilizadores.filter(p=>p.id==d.value).length&&(this.utilizadores.unshift({id:d.value,name:d.label,title:d.title}),this.myResources=this.utilizadores),this.popup2.close()}else this.popup2.close()},keyCode:"enter",text:"Gravar",cssClass:"mbsc-popup-button-primary"}],this.popupButtons=[],this.popupButtons2=[],this.utilizador=null,this.popupOptions={display:"bottom",locale:r.Mk,contentPadding:!1,fullScreen:!0,themeVariant:"light",scrollLock:!1,focusTrap:!1,onClose:()=>{this.isEdit||(this.manutencoes=[...this.manutencoes])},responsive:{medium:{display:"center",width:400,fullScreen:!1,touchUi:!1}}},this.popupOptions2={display:"bottom",locale:r.Mk,contentPadding:!1,fullScreen:!0,scrollLock:!1,focusTrap:!1,themeVariant:"light",responsive:{medium:{display:"center",width:400,fullScreen:!1,touchUi:!1}}},this.popupOptionsTooltip={display:"anchored",touchUi:!1,showOverlay:!1,contentPadding:!1,closeOnOverlayClick:!1,width:380},this.isEdit=!1,this.ver_fimDeSemana=!1,this.extras=[{id:1,name:"Pendentes",checked:!0,disabled:!1},{id:2,name:"",checked:!0,disabled:!1}],this.extraslist=[{id:1,name:"Pendentes",checked:!0,disabled:!1}],this.equipa=null,this.datainicio=new Date,this.datafim=new Date,this.searchValue=null}ngOnInit(){this.listar_ambitos_manutencao(),this.listar_equipas(),this.carregaUtilizadores(),this.carregaManutencoesPendentes(null)}listar_ambitos_manutencao(){this.drop_ambitos_manutencao=[],this.drop_ambitos_manutencao.push({label:"Sel. \xc2mbito",value:null}),this.MANDICAMBITOSService.getAll().subscribe(t=>{for(var o in Object.keys(t),t)this.drop_ambitos_manutencao.push({value:t[o].ID,label:t[o].NOME});this.drop_ambitos_manutencao=this.drop_ambitos_manutencao.slice()},t=>console.log(t))}listar_equipas(){this.drop_equipas=[],this.drop_equipas.push({label:"Sel. Equipa",value:null}),this.MANDICEQUIPASService.getAll().subscribe(t=>{for(var o in Object.keys(t),t)this.drop_equipas.push({value:t[o].ID,label:t[o].NOME_EQUIPA});this.drop_equipas=this.drop_equipas.slice()},t=>console.log(t))}carregaUtilizadores(){this.drop_utilizadores=[],this.GERUTILIZADORESService.getAll().subscribe(t=>{for(var n in t)this.drop_utilizadores.push({value:t[n].id_UTILIZADOR,label:(t[n].cod_UTZ??"")+" - "+t[n].nome_UTILIZADOR});this.drop_utilizadores=this.drop_utilizadores},t=>{console.log(t)})}carregaManutencoesPendentes(t){this.MANMOVMANUTENCAOCABService.MAN_GET_MANUTENCOES_PENDENTES([{DATA_INICIO:null,DATA_FIM:null,AMBITO:this.AMBITO_MANUTENCAO,EQUIPA:this.equipa}]).subscribe(o=>{Object.keys(o);var c=[];for(var a in o)c.push({id:o[a][0],start:new Date(o[a][16]),end:new Date(o[a][16]),allDay:!0,descricao:o[a][8],title:null==o[a][18]?"--":o[a][18].split(";;")[0].split("||")[0],local:o[a][7],TIPO_MANUTENCAO:this.getbytipo(o[a][13]),CLASSIFICACAO:o[a][13],color:this.getcor(o[a][13]),border:this.getcorBorder(o[a][6],o[a][16],o[a][17]),estado_text:this.getestado(o[a][6]),estado:o[a][6],type:"pendentes",tipo_utilizador:this.getTipoUtilizador(o[a][14]),nome_utilizador:o[a][9],ambito:o[a][11],ordem:o[a][19]});this.manutencoesDisponiveis=c.slice()},o=>{this.manutencoesDisponiveis=[],console.log(o)})}carregaManutencoesEmAtraso(t){var n=[{DATA_INICIO:(0,r.p6)("YYYY-MM-DD",this.datainicio),DATA_FIM:(0,r.p6)("YYYY-MM-DD",this.datafim),AMBITO:this.AMBITO_MANUTENCAO,EQUIPA:this.equipa}];let o=[];this.MANMOVMANUTENCAOCABService.MAN_GET_MANUTENCOES_EM_ATRASO(n).subscribe(i=>{for(var a in Object.keys(i),i)o.push({id:i[a][0],start:new Date(i[a][16]),original_start:new Date(i[a][16]),end:new Date(i[a][16]),original_end:new Date(i[a][16]),allDay:!0,descricao:i[a][8],title:null==i[a][18]?"--":i[a][18].split(";;")[0].split("||")[0],resource:i[a][15],local:i[a][7],TIPO_MANUTENCAO:this.getbytipo(i[a][13]),CLASSIFICACAO:i[a][13],color:this.getcor(i[a][13]),border:this.getcorBorder(i[a][6],i[a][16],i[a][17]),estado_text:this.getestado(i[a][6]),estado:i[a][6],tipo_utilizador:this.getTipoUtilizador(i[a][14]),nome_utilizador:i[a][9],ambito:i[a][11],ordem:i[a][19]});this.manutencoes_old=o},i=>{console.log(i)})}carregaUtilizadoresManutencoes(){var t=[{AMBITO:null,EQUIPA:this.equipa}];this.utilizadores=[],this.MANMOVMANUTENCAOCABService.MAN_GET_MANUTENCOES_GET_UTILIZADORES(t).subscribe(n=>{for(var o in this.utilizadores=[],n)this.utilizadores.push({id:n[o][0],name:(n[o][1]??"")+" - "+n[o][2],title:n[o][3]});this.temp_utilizadores=this.utilizadores,this.onSearch({target:{value:this.searchValue}})},n=>{console.log(n)})}carregaManutencoes(t){null!=t&&(this.datainicio=t.firstDay,this.datafim=t.lastDay);let n=[];var o=[{DATA_INICIO:(0,r.p6)("YYYY-MM-DD",this.datainicio),DATA_FIM:(0,r.p6)("YYYY-MM-DD",this.datafim),AMBITO:this.AMBITO_MANUTENCAO,EQUIPA:this.equipa}];this.carregaManutencoesEmAtraso(t),this.carregaUtilizadoresManutencoes(),this.MANMOVMANUTENCAOCABService.MAN_GET_MANUTENCOES_ENTRE_DATAS(o).subscribe(i=>{for(var a in Object.keys(i),i)n.push({id:i[a][0],start:new Date(i[a][16]),original_start:new Date(i[a][16]),end:new Date(i[a][16]),original_end:new Date(i[a][16]),allDay:!0,descricao:i[a][8],title:null==i[a][18]?"--":i[a][18].split(";;")[0].split("||")[0],resource:i[a][15],local:i[a][7],TIPO_MANUTENCAO:this.getbytipo(i[a][13]),CLASSIFICACAO:i[a][13],color:this.getcor(i[a][13]),border:this.getcorBorder(i[a][6],i[a][16],i[a][17]),estado_text:this.getestado(i[a][6]),estado:i[a][6],tipo_utilizador:this.getTipoUtilizador(i[a][14]),nome_utilizador:i[a][9],data_fim:i[a][17],ambito:i[a][11],ordem:i[a][19]});this.manutencoes=n,this.manutencoes=this.manutencoes.slice()},i=>{console.log(i)})}getTipoUtilizador(t){return"U"==t||"u"==t?"Atribu\xeddo ao Utilizador: ":"E"==t||"e"==t?"Atribu\xeddo \xe0 Equipa: ":"EX"==t||"ex"==t?"Atribu\xeddo ao Fornecedor: ":"N\xe3o est\xe1 Atribu\xedda!"}getbytipo(t){return"C"==t?"Corretiva":"M"==t?"Melhoria":"EX"==t?"Externa":"P"==t?"Preventiva":"MM"==t?"Melhoria":""}getcor(t){return"C"==t?"#3ba7ff4f":"M"==t?"#60e81a4f":"EX"==t?"#f1e9204f":"P"==t?"#e200004f":"#60e81a4f"}getcorBorder(t,n,o){return"PE"==t||"P"==t||"V"==t||"E"==t||"EM"==t||"C"==t||"R"==t||"S"==t||"RE"==t?(new Date).getTime()>new Date(n).getTime()?o?new Date(o).getTime()>new Date(n).getTime()?"yellow":"green":"red":"green":"A"==t||"CA"==t||"RJ"==t||"NE"==t?"red":"green"}getestado(t){return"PE"==t?"Submetida":"P"==t?"Planeada":"V"==t?"Validada":"A"==t?"Anulada":"E"==t?"Em Execu\xe7\xe3o":"EM"==t?"Em Elabora\xe7\xe3o":"CA"==t?"Cancelada":"C"==t?"Conclu\xedda":"RJ"==t?"Rejeitada":"R"==t?"Suspensa":"S"==t?"Pausa":"NE"==t?"N\xe3o Executada":"RE"==t?"Reaberta":"Submetida"}onItemDrop(t){t.data&&(this.manutencoesDisponiveis=[...this.manutencoesDisponiveis,t.data])}loadPopupForm(t){this.shiftNotes=t.descricao??null,this.shiftResource=parseInt(t.resource),this.shiftDate=[t.start,t.end]}openModal(t){const n=t,o=this.utilizadores.find(i=>i.id===n.resource);"A"!=t.estado&&"CA"!=t.estado&&"RJ"!=t.estado&&"NE"!=t.estado&&"C"!=t.estado?(this.isEdit=!0,this.popupHeader="<div>Editar "+(o?.name||"")+'</div><div class="employee-manutencoes-day">'+(0,r.p6)("DDDD",new Date(n.start),this.formatdate)+" ,"+(0,r.p6)("DD MMMM YYYY",new Date(n.start),this.formatdate)+"</div>"):(this.isEdit=!1,this.popupHeader="<div>"+(o?.name||"")+'</div><div class="employee-manutencoes-day">'+(0,r.p6)("DDDD",new Date(n.start),this.formatdate)+" ,"+(0,r.p6)("DD MMMM YYYY",new Date(n.start),this.formatdate)+"</div>"),this.tempShift=t,this.loadPopupForm(t),this.popupButtons=this.isEdit?this.popupEditButtons_edit:this.popupEditButtons,this.popup.open()}addUtilizador(){this.utilizador=null,this.popupButtons2=this.popupEditButtons2,this.popup2.open()}saveShift(){const t=new Date(this.shiftDate[0]);this.tempShift.start=t,this.tempShift.end=t,this.tempShift.resource=this.shiftResource,this.manutencoes=[...this.manutencoes],this.atualizarManutencao(this.tempShift),this.popup.close()}deleteShift(t){this.manutencoes=this.manutencoes.filter(n=>n.id!==t.id),this.manutencoesDisponiveis.push(t),this.atualizarManutencao(this.tempShift)}onDeleteClick(){this.deleteShift(this.tempShift),this.popup.close()}atualizarManutencao(t){var n=[{DATA_FIM:(0,r.p6)("YYYY-MM-DD HH:mm:ss",t.start),UTILIZADOR:t.resource,TIPO_UTILIZADOR:"U",ID:t.id}];this.MANMOVMANUTENCAOCABService.MAN_UPDATE_MANUTENCOES(n).subscribe(o=>{this.atualizaDados()},o=>{console.log(o),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao Gravar!"}),this.atualizaDados()})}onSearch(t){const n=t.target.value||"";clearTimeout(this.timer),this.timer=null,this.timer||(this.timer=setTimeout(()=>{if(n.length>0){let o=this.temp_utilizadores.filter(i=>i.name.toLowerCase().includes(n.toLowerCase()));0==o.length&&(o=[{id:"empty"}]),this.myResources=o}else this.myResources=this.utilizadores},200))}verFDS(){this.calView=this.ver_fimDeSemana?{timeline:{type:"week",eventList:!0,weekNumbers:!0,startDay:1,endDay:0}}:{timeline:{type:"week",eventList:!0,weekNumbers:!0,startDay:1,endDay:5}}}getEmAtraso(t){return this.manutencoes_old.filter(n=>n.resource==t.id)}atualizaDados(){this.carregaManutencoesPendentes(null),this.carregaManutencoes(null)}orderMyEvents(t){return t.ordem?1:-1}mouseEnter(){this.timer&&(clearTimeout(this.timer),this.timer=null)}mouseLeave(){this.timer=setTimeout(()=>{this.tooltip.close()},200)}verManutencao(t,n){this.CLASSIFICACAO=n,this.ID_PEDIDO_INPUT=t,this.displayManutencao=!0}onHide(){this.ID_PEDIDO_INPUT=null,this.CLASSIFICACAO=null}closeTooltip(){this.timer||(this.timer=setTimeout(()=>{this.tooltip.close()},200))}openTooltip(t,n){const o=n||t.event;this.temp_utilizadores.find(c=>c.id===o.resource),this.currentEvent=o,this.bgColor=o.color,clearTimeout(this.timer),this.timer=null,this.anchor=n?t.target:t.domEvent.target,this.tooltip.open()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(r.Tx),e.Y36(O.V),e.Y36(D.m),e.Y36(E.l),e.Y36(y.l),e.Y36(M.ez))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-gestao_manutencoes"]],viewQuery:function(t,n){if(1&t&&(e.Gf(U,5),e.Gf(I,5),e.Gf(S,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.popup=o.first),e.iGM(o=e.CRH())&&(n.popup2=o.first),e.iGM(o=e.CRH())&&(n.tooltip=o.first)}},decls:110,vars:96,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-content",2,"padding","0"],["id","formReclama","ngNativeValidate","",3,"keydown.enter"],["form",""],[1,"container-fluid",2,"padding","0"],[2,"width","100%"],[1,"form-group","col-md-12",2,"padding","1px 5px 1px 0"],[1,"form-group","col-md-3","col-lg-3",2,"padding","1px 5px 1px 10px"],["placeholder","Selecionar",3,"options","filter","ngModel","ngModelOptions","onChange","ngModelChange"],[1,"table-row-column","col-md-3",2,"padding-left","0","width","17%","padding-top","30px","min-width","253px","padding-bottom","0"],["label","Ver Fim-de-semana",3,"ngModel","ngModelOptions","binary","ngModelChange","onChange"],[1,"row",2,"margin","0","border-top","3px dotted lightgrey"],[1,"mbsc-grid","mbsc-no-padding",2,"height","calc(100vh - 250px)"],[1,"mbsc-row",2,"height","100%"],[1,"mbsc-col-sm-2",2,"height","100%","overflow","auto"],[1,"form-group","col-md-12","col-lg-12"],["placeholder","Selecionar",3,"options","filter","appendTo","ngModel","ngModelOptions","onChange","ngModelChange"],[1,"mbsc-form-group-title"],["mbsc-draggable","","class","external-drop-task md-gestao-manutencao",3,"dragData","ngStyle",4,"ngFor","ngForOf"],[1,"mbsc-col-sm-10","dynamically-color-and-invalidate-calendar",2,"height","100%"],[1,"md-gestao-manutencao",3,"data","resources","options","resourceTemplate","resourceHeaderTemplate","view","sidebarTemplate","sidebarHeaderTemplate","eventOrder","headerTemplate","scheduleEventContentTemplate"],["myHeaderTemplate",""],["sidebarTemp",""],["sidebarHeaderTemp",""],["resourceTemp",""],["eventTemp",""],["resourceHeaderTemplate",""],[1,"gestao-manutencao-popup",3,"options","buttons","headerText"],["popup",""],[1,"mbsc-form-group",2,"margin","1em"],[1,"mbsc-label","mbsc-label-box-stacked","mbsc-label-stacked","mbsc-ltr","mbsc-windows"],["placeholder","Selecionar","appendTo","body",3,"options","filter","ngModel","disabled","ngModelOptions","ngModelChange"],[1,"mbsc-form-group"],["label","Data","data-dropdown","true",3,"themeVariant","disabled"],["start",""],[3,"themeVariant","ngModel","startInput","options","ngModelChange"],["label","Descri\xe7\xe3o",3,"disabled","themeVariant","ngModel","ngModelChange"],["class","mbsc-button-group",4,"ngIf"],["popup2",""],["placeholder","Selecionar","appendTo","body",3,"options","filter","ngModel","ngModelOptions","ngModelChange"],[1,"md-tooltip",3,"anchor","options"],["tooltip",""],[3,"mouseenter","mouseleave"],[1,"md-tooltip-header",3,"ngStyle"],[1,"md-tooltip-name-age"],[1,"md-tooltip-info"],[1,"md-tooltip-title"],[1,"md-tooltip-status","md-tooltip-text"],[1,"md-tooltip-reason","md-tooltip-text"],[1,"md-tooltip-location","md-tooltip-text"],[1,"md-tooltip-title",2,"text-align","center"],["color","secondary",1,"md-tooltip-view-button",3,"click"],["header","Manuten\xe7\xe3o","position","top","appendTo","body",3,"dismissableMask","closeOnEscape","draggable","visible","modal","visibleChange","onHide"],[1,""],["class","cssapp-paginatarefa",3,"ID_PEDIDO_INPUT",4,"ngIf"],[1,"",2,"text-align","-webkit-center"],["type","button",1,"btn","btn-default",2,"float","right",3,"click"],["mbsc-draggable","",1,"external-drop-task","md-gestao-manutencao",3,"dragData","ngStyle"],[1,"md-gestao-manutencao-event",3,"click","mouseenter","mouseleave"],[1,"md-gestao-manutencao-event-title"],[1,"md-gestao-manutencao-event-desc"],[1,"md-timezone-nav"],["color","danger","variant","outline",1,"mbsc-button-block","mbsc-button-dark",2,"margin","0","width","160px",3,"themeVariant","click"],[1,"md-meeting-planner-header"],[1,"md-meeting-planner-zone","md-meeting-planner-Corretiva"],[1,"md-meeting-planner-zone","md-meeting-planner-Melhoria"],[1,"md-meeting-planner-zone","md-meeting-planner-Externa"],[1,"md-meeting-planner-zone","md-meeting-planner-Preventiva"],[1,"md-work-week-prev"],[1,"md-work-week-today"],[1,"md-work-week-next"],["mbsc-draggable","","class","external-drop-task ",3,"dragData","ngStyle",4,"ngFor","ngForOf"],["mbsc-draggable","",1,"external-drop-task",3,"dragData","ngStyle"],[1,"md-resource-details-sidebar-header"],[1,"gestao-manutencao-cont"],[1,"gestao-manutencao-name"],[1,"gestao-manutencao-title"],[1,"gestao-manutencao-avatar"],[1,"fa","fa-user"],[1,"md-gestao-manutencao-event",2,"padding","0 0.333334em","border","3px solid","border-radius","4px","min-height","52px",3,"ngStyle"],[1,"md-resource-header-template-title"],["startIcon","material-search","inputStyle","outline","placeholder","Pesquisar Utilizador",3,"ngModel","input","ngModelChange"],[1,"mbsc-button-group"],["color","danger","variant","outline",1,"mbsc-button-block",3,"themeVariant","click"],[1,"cssapp-paginatarefa",3,"ID_PEDIDO_INPUT"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6,7),e.NdJ("keydown.enter",function(i){return i.preventDefault()}),e.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"label"),e._uU(13,"\xc2mbito Manuten\xe7\xe3o"),e.qZA(),e.TgZ(14,"p-dropdown",12),e.NdJ("onChange",function(){return n.atualizaDados()})("ngModelChange",function(i){return n.AMBITO_MANUTENCAO=i}),e.qZA()(),e.TgZ(15,"div",13)(16,"p-checkbox",14),e.NdJ("ngModelChange",function(i){return n.ver_fimDeSemana=i})("onChange",function(){return n.verFDS()}),e.qZA()()()()()(),e.TgZ(17,"div",15)(18,"mbsc-page")(19,"div",16)(20,"div",17)(21,"div",18)(22,"div",19)(23,"label"),e._uU(24,"Equipas:"),e.qZA(),e.TgZ(25,"p-dropdown",20),e.NdJ("onChange",function(){return n.atualizaDados()})("ngModelChange",function(i){return n.equipa=i}),e.qZA()(),e.TgZ(26,"div",21),e._uU(27,"Manuten\xe7\xf5es"),e.qZA(),e.YNc(28,P,11,13,"div",22),e.qZA(),e.TgZ(29,"div",23)(30,"mbsc-eventcalendar",24),e.YNc(31,w,15,1,"ng-template",null,25,e.W1O),e.YNc(33,k,1,1,"ng-template",null,26,e.W1O),e.YNc(35,x,2,0,"ng-template",null,27,e.W1O),e.YNc(37,G,7,2,"ng-template",null,28,e.W1O),e.YNc(39,J,10,11,"ng-template",null,29,e.W1O),e.YNc(41,Y,2,1,"ng-template",null,30,e.W1O),e.qZA()()()()()()()()()()()(),e.TgZ(43,"mbsc-popup",31,32)(45,"div",33)(46,"label",34),e._uU(47,"Utilizador"),e.qZA(),e.TgZ(48,"p-dropdown",35),e.NdJ("ngModelChange",function(i){return n.shiftResource=i}),e.qZA()(),e.TgZ(49,"div",36),e._UZ(50,"mbsc-input",37,38),e.TgZ(52,"mbsc-datepicker",39),e.NdJ("ngModelChange",function(i){return n.shiftDate=i}),e.qZA()(),e.TgZ(53,"div",36)(54,"mbsc-textarea",40),e.NdJ("ngModelChange",function(i){return n.shiftNotes=i}),e.qZA()(),e.YNc(55,Q,3,1,"div",41),e.qZA(),e.TgZ(56,"mbsc-popup",31,42)(58,"div",33)(59,"label",34),e._uU(60,"Utilizador"),e.qZA(),e.TgZ(61,"p-dropdown",43),e.NdJ("ngModelChange",function(i){return n.utilizador=i}),e.qZA()()(),e.TgZ(62,"mbsc-popup",44,45)(64,"div",46),e.NdJ("mouseenter",function(){return n.mouseEnter()})("mouseleave",function(){return n.mouseLeave()}),e.TgZ(65,"div",47)(66,"span",48),e._uU(67),e.qZA()(),e.TgZ(68,"div",49)(69,"div",50),e._uU(70," Estado: "),e.TgZ(71,"span",51),e._uU(72),e.qZA()(),e.TgZ(73,"div",50),e._uU(74),e.TgZ(75,"span",52),e._uU(76),e.qZA()(),e.TgZ(77,"div",50),e._uU(78,"\xc2mbito: "),e.TgZ(79,"span",52),e._uU(80),e.qZA()(),e.TgZ(81,"div",50),e._uU(82,"Descri\xe7\xe3o: "),e.TgZ(83,"span",52),e._uU(84),e.qZA()(),e.TgZ(85,"div",50),e._uU(86,"Localiza\xe7\xe3o: "),e.TgZ(87,"span",53),e._uU(88),e.qZA()(),e.TgZ(89,"div",50),e._uU(90,"Data Prevista: "),e.TgZ(91,"span",53),e._uU(92),e.ALo(93,"date"),e.qZA()(),e.TgZ(94,"div",50),e._uU(95,"Data Conclu\xedda: "),e.TgZ(96,"span",53),e._uU(97),e.ALo(98,"date"),e.qZA()(),e.TgZ(99,"div",54)(100,"mbsc-button",55),e.NdJ("click",function(){return n.verManutencao(n.currentEvent.id,n.currentEvent.CLASSIFICACAO)}),e._uU(101,"Ver Manuten\xe7\xe3o"),e.qZA()()()()(),e.TgZ(102,"p-dialog",56),e.NdJ("visibleChange",function(i){return n.displayManutencao=i})("onHide",function(){return n.onHide()}),e.TgZ(103,"div",57),e.YNc(104,B,1,1,"app-ficha-manutencao",58),e.YNc(105,F,1,1,"app-manutencoes-preventivas",58),e.qZA(),e.TgZ(106,"p-footer")(107,"div",59)(108,"button",60),e.NdJ("click",function(){return n.displayManutencao=!1}),e._uU(109,"Fechar"),e.qZA()()()()),2&t){const o=e.MAs(32),i=e.MAs(34),c=e.MAs(36),a=e.MAs(38),d=e.MAs(40),p=e.MAs(42),X=e.MAs(51);e.xp6(14),e.Akn(e.DdM(84,h)),e.Q6J("options",n.drop_ambitos_manutencao)("filter",!0)("ngModel",n.AMBITO_MANUTENCAO)("ngModelOptions",e.DdM(85,_)),e.xp6(2),e.Q6J("ngModel",n.ver_fimDeSemana)("ngModelOptions",e.DdM(86,_))("binary",!0),e.xp6(9),e.Akn(e.DdM(87,h)),e.Q6J("options",n.drop_equipas)("filter",!0)("appendTo","body")("ngModel",n.equipa)("ngModelOptions",e.DdM(88,_)),e.xp6(3),e.Q6J("ngForOf",n.manutencoesDisponiveis),e.xp6(2),e.Q6J("data",n.manutencoes)("resources",n.myResources)("options",n.calendarOptions)("resourceTemplate",a)("resourceHeaderTemplate",p)("view",n.calView)("sidebarTemplate",i)("sidebarHeaderTemplate",c)("eventOrder",n.orderMyEvents)("headerTemplate",o)("scheduleEventContentTemplate",d),e.xp6(13),e.Q6J("options",n.popupOptions)("buttons",n.popupButtons)("headerText",n.popupHeader),e.xp6(5),e.Akn(e.DdM(89,h)),e.Q6J("options",n.drop_utilizadores)("filter",!0)("ngModel",n.shiftResource)("disabled",!n.isEdit)("ngModelOptions",e.DdM(90,_)),e.xp6(2),e.Q6J("themeVariant","light")("disabled",!n.isEdit),e.xp6(2),e.Q6J("themeVariant","light")("ngModel",n.shiftDate)("startInput",X)("options",n.rangeOptions),e.xp6(2),e.Q6J("disabled",!0)("themeVariant","light")("ngModel",n.shiftNotes),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(1),e.Q6J("options",n.popupOptions2)("buttons",n.popupButtons2)("headerText","Adicionar Utilizador"),e.xp6(5),e.Akn(e.DdM(91,h)),e.Q6J("options",n.drop_utilizadores)("filter",!0)("ngModel",n.utilizador)("ngModelOptions",e.DdM(92,_)),e.xp6(1),e.Q6J("anchor",n.anchor)("options",n.popupOptionsTooltip),e.xp6(3),e.Q6J("ngStyle",e.VKq(93,L,n.bgColor)),e.xp6(2),e.Oqu(n.currentEvent.title),e.xp6(5),e.Oqu(n.currentEvent.estado_text),e.xp6(2),e.Oqu(n.currentEvent.tipo_utilizador),e.xp6(2),e.Oqu(n.currentEvent.nome_utilizador),e.xp6(4),e.Oqu(n.currentEvent.ambito),e.xp6(4),e.Oqu(n.currentEvent.descricao),e.xp6(4),e.Oqu(n.currentEvent.local),e.xp6(4),e.Oqu(e.xi3(93,78,n.currentEvent.start,"yyyy-MM-dd")),e.xp6(5),e.Oqu(e.xi3(98,81,n.currentEvent.data_fim,"yyyy-MM-dd")),e.xp6(5),e.Akn(e.DdM(95,R)),e.Q6J("dismissableMask",!0)("closeOnEscape",!0)("draggable",!1)("visible",n.displayManutencao)("modal",!0),e.xp6(2),e.Q6J("ngIf","C"==n.CLASSIFICACAO),e.xp6(1),e.Q6J("ngIf",("P"==n.CLASSIFICACAO||"MM"==n.CLASSIFICACAO)&&null!=n.ID_PEDIDO_INPUT)}},dependencies:[m.sg,m.O5,m.PC,r.FB,r.tA,r.eN,r.Aq,r.wY,r.h_,r.pD,r.L2,r.hP,r.Ql,r.E9,r.h9,g.JJ,g.JL,g.On,g.F,v.Lt,M.$_,C.XZ,b.V,Z.c,N.u,m.uU],styles:[".gestao-manutencao-day[_ngcontent-%COMP%]{font-size:14px;font-weight:600;opacity:.6}.gestao-manutencao-popup[_ngcontent-%COMP%]   .mbsc-popup[_ngcontent-%COMP%]   .mbsc-popup-header[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.gestao-manutencao-cont[_ngcontent-%COMP%]{position:relative;padding-left:42px;max-height:40px}.gestao-manutencao-avatar[_ngcontent-%COMP%]{position:absolute;max-height:40px;max-width:40px;top:18px;transform:translate(-50%,-50%);left:20px;background:lightgray;width:25px;height:25px;display:flex;align-items:center;border-radius:15px;align-content:center;justify-content:center}.gestao-manutencao-name[_ngcontent-%COMP%]{font-size:15px}.gestao-manutencao-title[_ngcontent-%COMP%]{font-size:12px}.md-gestao-manutencao[_ngcontent-%COMP%]   .md-gestao-manutencao-event-title[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.md-gestao-manutencao[_ngcontent-%COMP%]   .md-gestao-manutencao-event-desc[_ngcontent-%COMP%]{opacity:.6;font-weight:initial;font-size:12px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.md-gestao-manutencao[_ngcontent-%COMP%]   .mbsc-timeline-resource[_ngcontent-%COMP%], .md-gestao-manutencao[_ngcontent-%COMP%]   .mbsc-timeline-resource-col[_ngcontent-%COMP%]{width:200px;align-items:center;display:flex}.md-gestao-manutencao[_ngcontent-%COMP%]   .mbsc-schedule-event[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:36px}.md-resource-header-template-title[_ngcontent-%COMP%]   .mbsc-textfield-wrapper[_ngcontent-%COMP%]{margin:0}.slot-name[_ngcontent-%COMP%]{text-align:center}.external-drop-calendar[_ngcontent-%COMP%]{border-right:1px solid #ccc}.external-drop-cont[_ngcontent-%COMP%]{height:100%;overflow:auto}.external-drop-task[_ngcontent-%COMP%]{padding:2px;margin:4px;border:3px solid;border-radius:4px}.external-drop-task[_ngcontent-%COMP%]{background:#0078d74f;cursor:pointer}.md-meeting-planner-Corretiva[_ngcontent-%COMP%]{background:#3ba7ff4f}.md-meeting-planner-Melhoria[_ngcontent-%COMP%]{background:#60e81a4f}.md-meeting-planner-Externa[_ngcontent-%COMP%]{background:#f1e9204f}.md-meeting-planner-Preventiva[_ngcontent-%COMP%]{background:#e200004f}.md-meeting-planner-zone[_ngcontent-%COMP%]{font-size:12px;padding:3px 6px;margin:0 5px;border-radius:16px;color:#888}.md-meeting-planner-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.md-tooltip[_ngcontent-%COMP%]   .mbsc-popup-content[_ngcontent-%COMP%]{padding:0}.md-tooltip[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.md-tooltip-header[_ngcontent-%COMP%]{padding:12px 16px}.md-tooltip-info[_ngcontent-%COMP%]{padding:16px;position:relative;line-height:30px}.md-tooltip-time[_ngcontent-%COMP%], .md-tooltip-status-button[_ngcontent-%COMP%]{float:right}.md-tooltip-text[_ngcontent-%COMP%]{font-weight:300}.md-tooltip-info[_ngcontent-%COMP%]   .mbsc-button[_ngcontent-%COMP%]{font-size:14px;margin:0}.md-tooltip-info[_ngcontent-%COMP%]   .mbsc-button.mbsc-material[_ngcontent-%COMP%]{font-size:12px}"]}),s})();var A=u(7667),H=u(4631),j=u(4344),K=u(2322);const $=[{path:"",component:V,canActivate:[H.r],data:{breadcrumb:""}},{path:"**",redirectTo:"",pathMatch:"full",data:{breadcrumb:""}}];let W=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[A.Bz.forChild($),m.ez,r.dT,g.u5,v.kW,C.nD,b.S,j.Z,K.J,A.Bz]}),s})()}}]);